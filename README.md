# agentsystems-verify

Open source CLI for verifying [agentsystems-notary](https://pypi.org/project/agentsystems-notary/) logs against Arweave blockchain.

Open source, independent verification. No API keys. No AgentSystems infrastructure required.

## Install

```bash
npm install -g agentsystems-verify
```

Or run directly with npx:

```bash
npx agentsystems-verify ticket.json logs.zip
```

## Usage

```bash
agentsystems-verify <ticket.json> <logs.zip>
```

### Arguments

- `ticket.json` - Arweave verification ticket
- `logs.zip` - ZIP file containing log files to verify

### Ticket Format

```json
{
  "type": "arweave",
  "owner": "<arweave-wallet-address>",
  "namespace": "<namespace>",
  "date_start": "2024-01-01",
  "date_end": "2024-01-31"
}
```

The ticket is generated by the agentsystems-notary SDK. It contains:

- `owner` - Arweave wallet address (derived from KMS public key)
- `namespace` - Your namespace identifier
- `date_start` / `date_end` - Date range to verify

## How It Works

1. Reads log files from your ZIP archive
2. Computes SHA-256 hashes (canonicalized JSON)
3. Queries Arweave blockchain for matching transactions
4. Reconciles: verified, unnotarized, missing

You can audit the code yourself.

## Library Usage

```typescript
import { verify, validateTicket } from "agentsystems-verify";
import { readFileSync } from "fs";

const ticket = validateTicket(JSON.parse(readFileSync("ticket.json", "utf-8")));
const zipBuffer = readFileSync("logs.zip");

const results = await verify(ticket, zipBuffer, {
  onProgress: (msg) => console.log(msg),
});

console.log(`Verified: ${results.verified.length}`);
console.log(`Unnotarized: ${results.unnotarized.length}`);
console.log(`Missing: ${results.missing.length}`);
```

## Why This Exists

The agentsystems-notary SDK writes tamper-evident logs to Arweave. This CLI provides **fully open source, decentralized verification** - no need to trust AgentSystems' verify-ui or verify-api.

```
SDK (write)  →  Arweave blockchain  →  This CLI (verify)
     ↓                                        ↓
   Open source                           Open source
   No API required                       No API required
```

## License

Apache-2.0
